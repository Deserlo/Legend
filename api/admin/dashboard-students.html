<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Dashboard Students Page</title>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=1260, initial-scale=1">
    <meta name="theme-color" content="#fff">
    <meta name="format-detection" content="telephone=no">
    <meta name="description" content="Page description">
    <!--Twitter Card data-->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@publisher_handle">
    <meta name="twitter:title" content="Page Title">
    <meta name="twitter:description" content="Page description less than 200 characters">
    <meta name="twitter:creator" content="@author_handle">
    <meta name="twitter:image" content="http://www.example.com/image.jpg">
    <!--Open Graph data-->
    <meta property="og:title" content="Title Here">
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://www.example.com/">
    <meta property="og:image" content="http://example.com/image.jpg">
    <meta property="og:description" content="Description Here">
    <meta property="og:site_name" content="Site Name, i.e. Moz">
    <meta property="fb:admins" content="Facebook numeric ID">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700,700i,900&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" media="all" href="../../css/app.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.2/jquery.form.min.js" integrity="sha384-FzT3vTVGXqf7wRfy8k4BiyzvbNfeYjK+frTVqZeNDFl8woCbF0CYG6g2fMEFFo/i" crossorigin="anonymous"></script>-->
    <script type="text/javascript">
    $(document).ready(function(){
        $.getJSON("/admin/students-list",function(data){
            var content =""
            $.each(data, function(i,student){
                var width = (student.totalAttended/student.totalClasses)*100
                console.log(width);
                content += '<div class="users__item"><div class="users__cell"><div class="users__preview"><img class="users__pic" src="../../img/user.png"></div><div class="users__group">';
                content += '<div class="users__name">' + student.firstName + ' ' + student.lastName + '</div>';
                content += '<div class="users__info">' + student.belt + " belt" + '</div> </div> </div>';
                content += '<div class="users__cell"><div class="users__scale">';
                content += '<div class="users__progress" style="width:' + width + '%"></div>';
                content += '<div class="users__counter">' + student.totalAttended + " of " + student.totalClasses + '</div> </div> </div>';
                content += '<div class="users__cell"><a class="users__btn btn-stroke" href="/user/profile/' + student._id + '"'  + '>VIEW PROFILE</a></div>';
                content += '</div>';
            });
            $(content).appendTo("#students");
        });
    });
    </script>
  </head>
  <body>
    <div class="page">
      <header class="header">
        <div class="header__center center"><a class="header__logo" href="#"><img class="header__pic" src="../../img/legend.svg" width="180"></a>
          <nav class="header__nav"><a class="header__link active" href="/">Home</a><a class="header__link" href="#">Programs</a><a class="header__link" href="/register">Register</a><a class="header__link" href="/login">Login</a></nav><a class="header__btn btn btn_white" href="/contact-us">CONTACT US</a>
        </div>
      </header>
      <div class="container">
        <div class="dashboard">
          <div class="dashboard__center center">
            <div class="dashboard__head">
              <div class="dashboard__nav"><a class="dashboard__link active" href="/admin/students">Students</a><a class="dashboard__link" href="/admin/class">Classes</a></div><button class="dashboard__add" data-fancybox data-src="#add-student"><img class="dashboard__icon" src="../../img/add.svg"></button>
            </div>
            <div class="dashboard__body">
              <div class="users" id="students">
              </div>
            </div>
          </div>
        </div>
        <div class="form form_modal" id="add-student">
          <form class="form__container" method="post" action="/admin/students">
            <div class="form__title title">ADD STUDENT</div>
            <div class="form__row">
              <div class="form__col">
                <div class="form__field field">
                  <div class="field__wrap"><input class="field__input" type="text" name="firstname" placeholder=" First Name" required></div>
                </div>
              </div>
              <div class="form__col">
                <div class="form__field field">
                  <div class="field__wrap"><input class="field__input" type="text" name= "lastname" placeholder="Last Name" required></div>
                </div>
              </div>
            </div>
            <div class="form__field field">
              <div class="field__wrap"><input class="field__input" type="date" name="dob" placeholder="DOB" required></div>
            </div>
            <div class="form__field field">
              <div class="field__wrap"><input class="field__input" type="text" name="address" placeholder="Address" required></div>
            </div>
            <div class="form__row">
              <div class="form__col">
                <div class="form__field field">
                  <div class="field__wrap"><input class="field__input" type="text" name="contactName" placeholder="Emergency Contact" required></div>
                </div>
              </div>
              <div class="form__col">
                <div class="form__field field">
                  <div class="field__wrap"><input class="field__input" type="text" name="contactPhone" placeholder="Phone Number" required></div>
                </div>
              </div>
            </div>
            <div class="form__field field">
              <div class="field__wrap"><input class="field__input" type="text" name="belt" placeholder="Belt"></div>
            </div>
                <div class="form__foot"><button class="form__btn btn" type="submit">SUBMIT</button></div>
          <!--<div class="form__foot"><button class="form__btn btn" type="submit" data-fancybox data-src="#student-added">SUBMIT</button></div>-->
          </form>
        </div>
        <!--
        <div class="form form_modal" id="student-added">
          <form class="form__container" >
            <div class="form__subtitle">STUDENT ADDED</div>
            <div class="form__content">You have added <strong>$name $lastname</strong> successfully. Please use the confirmation code below:</div>
            <div class="form__code">XU93HD</div>
            <div class="form__foot"><button class="form__btn btn" type="submit" data-fancybox-close>DONE</button></div>
          </form>
        </div>
        -->
      </div>
      <footer class="footer">
        <div class="footer__center center"></div>
      </footer>
    </div>
    <script type="text/javascript" src="../../js/app.js"></script>
  </body>
</html>
